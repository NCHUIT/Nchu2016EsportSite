<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.6/semantic.min.css">
        <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.6/semantic.min.js"></script>
        <link rel="shortcut icon" type="image/x-icon" href="img/LOGO.gif">
        <link rel="stylesheet" href="css/stone.css">
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>2016 中興校園電競賽</title>
        <style>
                        .section {
                            padding: 20px 0;
                        }
                        .space {
                            height: 120px;
                        }
        </style>
    </head>
    <body class="backgroundlol">
        <div class="ui container">
            <div class="ui stackable grid">
                <div class="ui teal inverted segment">
                    <h3 >2016唯一信癢Χ清流盃爐石戰記大賽報名表</h3>
                </div>
            </div>
            <form id="myform" class="ui form">
                <div class="ui stackable grid">
                    <!-- 1 -->
                    <div class="row">
                        <div class="eight wide column">
                            <div class="ui raised segment">
                                <a class="ui red ribbon label">贏家</a>
                                <span class="ui teal header">就是我</span>
                                <div class="ui field">
                                    <div class="ui left action input">
                                        <a class="ui button">我叫</a>
                                        <input type="text" name="member1_name" placeholder="">
                                    </div>
                                </div>
                                <div class="ui field">
                                    <div class="ui left action input">
                                        <a class="ui button">學號</a>
                                        <input type="text" name="member1_Sid"  placeholder="">
                                    </div>
                                </div>
                                <div class="two fields">
                                    <div class="ui field depart-select"></div>
                                    <div class="ui field grade-select"></div>
                                </div>
                                <div class="ui field">
                                    <div class="ui left action input">
                                        <a class="ui button">手機</a>
                                        <input type="text" name="member1_Pnumber"  placeholder="">
                                    </div>
                                </div>
                                <div class="ui field">
                                    <div class="ui left action input">
                                        <a class="ui button">帳號</a>
                                        <input type="text" name="member1_nick"  placeholder="請填遊戲帳號">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <div id="lolSubmit" class="ui submit button " style="width: 162px;">我填完了</div>
                <div class="ui error message"></div>
            </form>
            <div class="ui inverted vertical footer segment">
                <div class="ui center aligned container">
                    <img src="http://i.imgur.com/WZsKt8x.png?1" class="ui centered mini image">
                    <div class="ui inverted section divider"><a class="nchuit" href="http://nchuit.cc/">NCHU IT</a>
                    </div>
                    <div class="ui horizontal inverted small divided link list">
                        <a class="item" href="./LOL_join.html">給我LOL!</a>
                        <a class="item" href="http://semantic-ui.com/examples/sticky.html#">00002</a>
                        <a class="item" href="http://semantic-ui.com/examples/sticky.html#">00003</a>
                        <a class="item" href="./index.html">回首頁</a>
                    </div>
                </div>
            </div>
            <div style="display: none;">
                <select class="ui search fluid selection dropdown" id="depart-tmpl">
                    <option value="">搜尋or新增系所</option>
                    <option value="文學院">文學院</option>
                    <option value="管理學院">管理學院</option>
                    <option value="農業暨自然資源學院">農業暨自然資源學院</option>
                    <option value="中國文學系學士班">中國文學系學士班</option>
                    <option value="外國語文學系學士班">外國語文學系學士班</option>
                    <option value="歷史學系學士班">歷史學系學士班</option>
                    <option value="財務金融學系學士班">財務金融學系學士班</option>
                    <option value="企業管理學系學士班">企業管理學系學士班</option>
                    <option value="法律學系學士班">法律學系學士班</option>
                    <option value="會計學系學士班">會計學系學士班</option>
                    <option value="資訊管理學系學士班">資訊管理學系學士班</option>
                    <option value="景觀與遊憩學士學位學程">景觀與遊憩學士學位學程</option>
                    <option value="生物科技學士學位學程">生物科技學士學位學程</option>
                    <option value="國際農企業學士學位學程">國際農企業學士學位學程</option>
                    <option value="農藝學系學士班">農藝學系學士班</option>
                    <option value="園藝學系學士班">園藝學系學士班</option>
                    <option value="森林學系林學組學士班">森林學系林學組學士班</option>
                    <option value="森林學系木材科學組學士班">森林學系木材科學組學士班</option>
                    <option value="應用經濟學系學士班">應用經濟學系學士班</option>
                    <option value="植物病理學系學士班">植物病理學系學士班</option>
                    <option value="昆蟲學系學士班">昆蟲學系學士班</option>
                    <option value="動物科學系學士班">動物科學系學士班</option>
                    <option value="獸醫學系學士班A">獸醫學系學士班A</option>
                    <option value="獸醫學系學士班B">獸醫學系學士班B</option>
                    <option value="土壤環境科學系學士班">土壤環境科學系學士班</option>
                    <option value="生物產業機電工程學系學士班">生物產業機電工程學系學士班</option>
                    <option value="水土保持學系學士班">水土保持學系學士班</option>
                    <option value="食品暨應用生物科技學系學士班">食品暨應用生物科技學系學士班</option>
                    <option value="行銷學系學士班">行銷學系學士班</option>
                    <option value="化學系學士班">化學系學士班</option>
                    <option value="生命科學系學士班">生命科學系學士班</option>
                    <option value="應用數學系學士班">應用數學系學士班 A</option>
                    <option value="應用數學系學士班B">應用數學系學士班B</option>
                    <option value="物理學系一般物理組學士班">物理學系一般物理組學士班</option>
                    <option value="物理學系光電物理組學士班">物理學系光電物理組學士班</option>
                    <option value="資訊科學與工程學系學士班">資訊科學與工程學系學士班</option>
                    <option value="學士後太陽能光電系統應用學士學位學程">學士後太陽能光電系統應用學士學位學程</option>
                    <option value="機械工程學系學士班A">機械工程學系學士班A</option>
                    <option value="機械工程學系學士班B">機械工程學系學士班B</option>
                    <option value="土木工程學系學士班 A">土木工程學系學士班A</option>
                    <option value="土木工程學系學士班 B">土木工程學系學士班B</option>
                    <option value="環境工程學系學士班">環境工程學系學士班</option>
                    <option value="電機工程學系學士班 A">電機工程學系學士班A</option>
                    <option value="電機工程學系學士班 B">電機工程學系學士班B</option>
                    <option value="化學工程學系學士班">化學工程學系學士班</option>
                    <option value="材料科學與工程學系學士班">材料科學與工程學系學士班</option>
                </select>
                <select class="ui search fluid selection dropdown" id="grade-tmpl">
                    <option value="">Choose or Add Grade</option>
                    <option value="1">一年級</option>
                    <option value="2">二年級</option>
                    <option value="3">三年級</option>
                    <option value="4">四年級</option>
                    <option value="5">五年級</option>
                </select>
            </div>
            <div class="ui page dimmer" id="dimmer">
                <div class="content">
                    <div class="center">
                        <div class="ui text loader">Sending...</div>
                    </div>
                </div>
            </div>
            <div class="ui modal" id="successShow" >
                <i class="close icon"></i>
                <div class="header">
                    非常感謝您
                </div>
                <div class="image content">
                    <div class="ui medium image">
                        <img src="img/LOGO.gif">
                    </div>
                    <div class="description">
                        <div class="ui header">Thank you!</div>
                        <p>我們已經收到您的回覆.</p>
                        <p>接下來您需要做的是多多練習喔！</p>
                        <p>祝福您得冠軍呦^.^</p>
                    </div>
                </div>
                <div class="actions">
                    <div class="ui teal buttons">
                        <div class="ui button">提交其他報名表</div>
                        <div class="ui combo bottom right pointing dropdown icon button" id="combo_dropdown">
                            <i class="dropdown icon"></i>
                            <div class="menu">
                                <a class="item" href="./LOL_join.html"><i class="pointing right icon"></i>就愛LOL^.^</a>
                                <div class="divider"></div>
                                <a href="./LOL_fuck.html" class="item"><i class="pointing right icon"></i>中路殺殺殺之我好累</a>
                                <div class="divider"></div>
                                <a href="./hearthstone_join.html" class="item"><i class="pointing right icon"></i>爐石出牌囉</a>
                                <div class="divider"></div>
                                <a href="./hearthstone_join.html" class="item"><i class="pointing right icon"></i>糞game</a>
                            </div>
                        </div>
                    </div>
                    <a href="./index.html" class="ui positive right labeled icon button">
                    回競賽首頁
                    <i class="home icon"></i>
                    </a>
                </div>
            </div>
            <script>
                        jQuery(document).ready(function($) {
                        // fill up select and semantic dropdown init
                            var depart_tmpl = $('#depart-tmpl');
                            $('.depart-select').each(function(i,e){
                                depart_tmpl.clone().removeAttr('id').attr('name','member' + (i + 1) + "_dep").appendTo($(e));
                            });
                            var grade_tmpl = $('#grade-tmpl');
                            $('.grade-select').each(function(i,e){
                                grade_tmpl.clone().removeAttr('id').attr('name','member' + ( i + 1 ) + "_grade").appendTo($(e));
                            });
                            $('select').dropdown({
                                allowAdditions: true,
                                message: {
                                    addResult : '其他: <b>{term}</b>',
                                },
                            });
                            // form field rule
                            var player_rule_fields = {
                            };
                            for (var i = 1; i <= 1; i++) {
                                player_rule_fields['member' + i + '_name'] = {
                                    identifier: 'member' + i +'_name',
                                    rules: [
                                    {
                                        type   : 'empty',
                                        prompt : 'Please enter your 隊員' + i +'姓名',
                                    }
                                    ]
                                };
                                player_rule_fields['member' + i + '_Sid'] = {
                                    identifier: 'member' + i +'_Sid',
                                    rules: [
                                    {
                                        type   : 'empty',
                                        prompt : 'Please enter your 隊員' + i +'學號',
                                    }
                                    ]
                                };
                                player_rule_fields['member' + i + '_Pnumber'] = {
                                    identifier: 'member' + i +'_Pnumber',
                                    rules: [
                                    {
                                        type   : 'empty',
                                        prompt : 'Please enter your 隊員' + i +'手機',
                                    }
                                    ]
                                };
                                player_rule_fields['member' + i + '_nick'] = {
                                    identifier: 'member' + i +'_nick',
                                    rules: [
                                    {
                                        type   : 'empty',
                                        prompt : 'Please enter your 隊員' + i +'暱稱',
                                    }
                                    ]
                                };
                                player_rule_fields['member' + i + '_dep'] = {
                                    identifier: 'member' + i +'_dep',
                                    rules: [
                                    {
                                        type   : 'empty',
                                        prompt : 'Please select your 隊員' + i +'系所',
                                    }
                                    ]
                                };
                                player_rule_fields['member' + i + '_grade'] = {
                                    identifier: 'member' + i +'_grade',
                                    rules: [
                                    {
                                        type   : 'empty',
                                        prompt : 'Please select your 隊員' + i +'年級',
                                    }
                                    ]
                                };
                            }
                            var submitfun = function(event){
                                $('#dimmer').dimmer('show');
                            // console.log(event);
                            event.preventDefault();//防止做預設的動作
                            var members = [];
                            for (var i = 1; i <= 1; i++) {
                                members.push({
                                    name: jQuery("input[name=member" + i +"_name]").val(),
                                    dep: jQuery("select[name=member" + i +"_dep]").val(),
                                    grade: jQuery("select[name=member" + i +"_grade]").val(),
                                    sid: jQuery("input[name=member" + i +"_Sid]").val(),
                                    pnumber: jQuery("input[name=member" + i +"_Pnumber]").val(),
                                    nick: jQuery("input[name=member" + i +"_nick]").val()
                                });
                            }
                            var inputData = {
                                members: members
                            };
                            $('#lolSubmit').addClass("disabled");
                            var api = "https://script.google.com/macros/s/AKfycbyiODubufuxi9nVgUh2Kwy0VzTktTWoJ7IvDpMFhfSuP4gk5_yA/exec";
                            $.ajax({
                                url: api,
                                dataType: 'jsonp',
                                data: {data: JSON.stringify(inputData), callback: "submit_callback"},
                            })
                            .done(function(data) {
                                console.log(data);
                                $('#successShow').modal("show");
                                console.log("show");
                            })
                            .fail(function() {
                                console.log("error");
                            })
                            .always(function() {
                                console.log("complete");
                                $('#dimmer').dimmer('hide');
                                $('#lolSubmit').removeClass("disabled");
                            });
                            return false;//多重防止
                            };
                            $('#myform').form({
                                on: 'blur',
                                fields: player_rule_fields,
                                onSuccess: submitfun
                            });
                            $('#input_6').popup({
                                on: 'focus'
                            });
                            $('#combo_dropdown')
                              .dropdown({action: 'combo'});
                        });
            </script>
        </div>
    </div>
</body>
</html>